<!doctype html>
<html>
	<head>
        <meta charset="UTF-8">
        <title>RoomVer</title>
        <meta name="viewport" content="width=device-width">
		<link rel="stylesheet" type="text/css" href="style.css">
		<script type="text/javascript" src="Scripts/DeviceOrientationHandler.js"></script>
		<style>
			body { margin: 0; }
			canvas { display: block; }
            h1 {margin: 10px;}
		</style>
	</head>
	<body>
		<div id="overlay">
			<div>
				<button id="startButton">Start</button>
				<p>Using device orientation might require a user interaction.</p>
			</div>
		</div>
        <div class="header">
			<h1>Room Verification Tool</h1>
			<p>Rotate your device to record a full 360 degree view of the room</p>
        </div>
        <!-- <button onclick="requestOrientationPermission();">Request Orientation Permission</button> -->
        <div class="infotable">
            <!-- <h2>Device Orientation</h2> -->
            <table>
              <tr>
                <td>Event Supported</td>
                <td id="doEvent"></td>
              </tr>
              <tr>
                <td>Tilt Left/Right [gamma]</td>
                <td id="doTiltLR"></td>
              </tr>
              <tr>
                <td>Tilt Front/Back [beta]</td>
                <td id="doTiltFB"></td>
              </tr>
              <tr>
                <td>Direction [alpha]</td>
                <td id="doDirection"></td>
              </tr>
            </table>
		</div>
		<!-- Camera -->
		<main id="camera">

		    <!-- Camera sensor -->
		    <canvas id="camera--sensor"></canvas>
		    
		    <!-- Camera view -->
		    <video id="camera--view" autoplay playsinline></video>
		    
		    <!-- Camera output -->
		    <img src="//:0" alt="" id="camera--output">

		    <!-- Camera trigger -->
		    <button id="camera--trigger">Take a picture</button>

		</main>
		<!-- Reference to your JavaScript file -->
		<script type="text/javascript" src="Scripts/DeviceCameraControl.js"></script>
        <script>
           	var startButton = document.getElementById( 'startButton' );
			startButton.addEventListener( 'click', function () {
				requestOrientationPermission();
				cameraStart();
				init();
				animate();

			}, false );

			function init(){
				var overlay = document.getElementById( 'overlay' );
				overlay.remove();
			}

			function animate() {
				window.requestAnimationFrame( animate );
			}
		</script>
	</body>
</html>